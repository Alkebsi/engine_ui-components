import{m as x,H as z,W as Y,R as L,_,k as U,n as Z,J as j,h as F,j as K,p as ee,r as te,s as ne,a as q,P as M,t as R,$ as N,u as oe,D as ie,A as re,C as V,l as se,v as ae,w as ce}from"./template-DUn1E-Qh.js";const le={"jhon.doe@example.com":{name:"Jhon Doe",picture:"https://www.profilebakery.com/wp-content/uploads/2023/04/Profile-Image-AI.jpg"}},ue=(n,o)=>{const i=(o??le)[n],c=(i==null?void 0:i.name)??n,r=c.trim().split(/\s+/);let l,d;return r[0]&&r[0][0]&&(l=r[0][0].toUpperCase(),r[0][1]&&(d=r[0][1].toUpperCase())),r[1]&&r[1][0]&&(d=r[1][0].toUpperCase()),x`
  <div style="display: flex; gap: 0.25rem; overflow: hidden;">
    ${!(i!=null&&i.picture)&&(l||d)?x`
      <bim-label
        style=${Y({borderRadius:"999px",padding:"0.375rem",backgroundColor:"var(--bim-ui_bg-contrast-20)",aspectRatio:"1",fontSize:"0.7rem"})}>${l}${d}</bim-label>
      `:null}
    <bim-label .img=${i==null?void 0:i.picture}>${c}</bim-label>
  </div>
`},de=n=>{const{topic:o,styles:a,viewpoint:i,actions:c}=n,r={delete:!0,...c};return x`<bim-table @cellcreated=${({detail:d})=>{const{cell:u}=d;u.style.marginLeft="0"}} ${z(d=>{if(!d)return;const u=d;u.headersHidden=!0,u.hiddenColumns=["guid","author"],u.dataTransform={Comment:(p,y)=>{const{guid:e}=y;if(typeof e!="string")return p;const t=o.comments.get(e);if(!t)return p;const C=()=>{o.comments.delete(e)};return x`
        <div style="display: flex; flex-direction: column; gap: 0.25rem; flex: 1">
          <div style="display: flex; justify-content: space-between;">
            <div style="display: flex; gap: 0.375rem;">
              ${ue(t.author,a)}
              <bim-label style="color: var(--bim-ui_bg-contrast-40)">@ ${t.date.toDateString()}</bim-label>
            </div>
            <div>
              <style>
                #TCDBT {
                  background-color: transparent;
                  --bim-label--c: var(--bim-ui_bg-contrast-60)
                }

                #TCDBT:hover {
                  --bim-label--c: #FF5252;
                }
              </style>
              ${r!=null&&r.delete?x`<bim-button @click=${C} id="TCDBT" icon="majesticons:delete-bin"></bim-button>`:null}
            </div>
          </div>
          <bim-label style="margin-left: 1.7rem; white-space: normal">${t.comment}</bim-label>
        </div>
      `}};let g=o.comments.values();i&&(g=[...o.comments.values()].filter(p=>p.viewpoint===i)),u.data=[...g].map(p=>({data:{guid:p.guid,Comment:p.comment,author:(()=>{const y=a;if(!y)return p.author;const e=y[p.author];return(e==null?void 0:e.name)??p.author})()}}))})}><bim-label slot="missing-data" icon="ph:warning-fill" style="--bim-icon--c: gold;">This topic has no comments</bim-label></bim-table>`},fe=(n,o=!0)=>{const a=L.create(de,n);if(o){const{topic:i}=n,[c,r]=a;i.comments.onItemSet.add(()=>r()),i.comments.onItemUpdated.add(()=>r()),i.comments.onItemDeleted.add(()=>r()),i.comments.onCleared.add(()=>r())}return a},me=Object.freeze(Object.defineProperty({__proto__:null,topicComments:fe},Symbol.toStringTag,{value:"Module"})),pe=n=>{const{components:o,actions:a,tags:i}=n,c=(a==null?void 0:a.dispose)??!0,r=(a==null?void 0:a.download)??!0,l=(a==null?void 0:a.visibility)??!0,d=(i==null?void 0:i.schema)??!0,u=(i==null?void 0:i.viewDefinition)??!0,g=o.get(_),p=document.createElement("bim-table");p.addEventListener("cellcreated",({detail:e})=>{const{cell:t}=e;t.style.padding="0.25rem 0"}),p.hiddenColumns=["modelID"],p.headersHidden=!0;const y=[];for(const[,e]of g.groups){if(!e)continue;const t={data:{Name:e.name||e.uuid,modelID:e.uuid}};y.push(t)}return p.dataTransform={Name:(e,t)=>{const{modelID:C}=t;if(typeof C!="string")return e;const b=g.groups.get(C);if(!b)return C;const w={};for(const O of b.items)w[O.id]=O.ids;let I;const{schema:s}=b.ifcMetadata;d&&s&&(I=x`
          <bim-label style="background-color: var(--bim-ui_main-base); padding: 0 0.25rem; color: var(--bim-ui_main-contrast); border-radius: 0.25rem;">${s}</bim-label>
          `);let f;if(u&&"viewDefinition"in b.ifcMetadata){const O=b.ifcMetadata.viewDefinition;f=x`
          ${O.split(",").map(D=>x`<bim-label style="background-color: var(--bim-ui_main-base); padding: 0 0.25rem; color: var(--bim-ui_main-contrast); border-radius: 0.25rem;">${D}</bim-label>`)}
        `}let m;c&&(m=x`<bim-button @click=${()=>g.disposeGroup(b)} icon="mdi:delete"></bim-button>`);let h;l&&(h=x`<bim-button @click=${D=>{const v=o.get(U),T=D.target;v.set(T.hasAttribute("data-model-hidden"),w),T.toggleAttribute("data-model-hidden"),T.icon=T.hasAttribute("data-model-hidden")?"mdi:eye-off":"mdi:eye"}} icon="mdi:eye"></bim-button>`);let $;return r&&($=x`<bim-button @click=${()=>{const D=document.createElement("input");D.type="file",D.accept=".ifc",D.multiple=!1,D.addEventListener("change",async()=>{if(!(D.files&&D.files.length===1))return;const v=D.files[0],T=await v.arrayBuffer(),Q=await o.get(Z).saveToIfc(b,new Uint8Array(T)),J=new File([Q],v.name),W=document.createElement("a");W.href=URL.createObjectURL(J),W.download=J.name,W.click(),URL.revokeObjectURL(W.href)}),D.click()}} icon="flowbite:download-solid"></bim-button>`),x`
       <div style="display: flex; flex: 1; gap: var(--bim-ui_size-4xs); justify-content: space-between; overflow: auto;">
        <div style="display: flex; flex-wrap: wrap; align-items: center; gap: 0 var(--bim-ui_size-4xs); flex-grow: 1; overflow: auto;">
          <div style="min-height: 1.75rem; overflow: auto; display: flex;">
            <bim-label style="white-space: normal;">${e}</bim-label>
          </div>
          <div style="display: flex; flex-wrap: wrap; gap: var(--bim-ui_size-4xs); overflow: auto;">
            ${I}
            ${f}
          </div>
        </div>
        <div style="display: flex; align-self: flex-start; flex-shrink: 0;">
          ${$}
          ${h}
          ${m}
        </div>
       </div>
      `}},p.data=y,x`
    <div>
      ${y.length===0?x`<bim-label>No models has been loaded yet</bim-label>`:p}
    </div>
  `},ge=(n,o=!0)=>{const a=L.create(pe,n);if(o){const{components:i}=n,c=i.get(_),[,r]=a;c.onFragmentsLoaded.add(()=>setTimeout(()=>r())),c.onFragmentsDisposed.add(()=>r())}return a},he=Object.freeze(Object.defineProperty({__proto__:null,modelsList:ge},Symbol.toStringTag,{value:"Module"})),X=["Name","ContainedInStructure","ForLayerSet","LayerThickness","HasProperties","HasAssociations","HasAssignments","HasPropertySets","PredefinedType","Quantities","ReferencedSource","Identification",n=>n.includes("Value"),n=>n.startsWith("Material"),n=>n.startsWith("Relating"),n=>{const o=["IsGroupedBy","IsDecomposedBy"];return n.startsWith("Is")&&!o.includes(n)}];async function P(n,o,a,i=X,c=!1){const r=n.get(j),l=await o.getProperties(a);if(!l)return{data:{Entity:`${a} properties not found...`}};const d=r.relationMaps[o.uuid],u={data:{}};for(const g in l){const p=i.map(e=>typeof e=="string"?g===e:e(g)).includes(!0);if(!(g==="type"||p))continue;const y=l[g];if(y)if(y.type===5){u.children||(u.children=[]);const e=await P(n,o,y.value,i,c);u.children.push(e)}else if(typeof y=="object"&&!Array.isArray(y)){const{value:e,type:t}=y;if(c)t===1||t===2||t===3||(u.data[g]=e);else{const C=typeof e=="number"?Number(e.toFixed(3)):e;u.data[g]=C}}else if(Array.isArray(y))for(const e of y){if(e.type!==5)continue;u.children||(u.children=[]);const t=await P(n,o,e.value,i,c);u.children.push(t)}else if(g==="type"){const e=F[y];u.data.Entity=e}else u.data[g]=y}if(d&&d.get(l.expressID)){const g=d.get(l.expressID);for(const p of i){const y=[];if(typeof p=="string"){const e=r._inverseAttributes.indexOf(p);e!==-1&&y.push(e)}else{const e=r._inverseAttributes.filter(t=>p(t));for(const t of e){const C=r._inverseAttributes.indexOf(t);y.push(C)}}for(const e of y){const t=g.get(e);if(t)for(const C of t){const b=await P(n,o,C,i,c);u.children||(u.children=[]),u.children.push(b)}}}}return u}const be=n=>{const{components:o,fragmentIdMap:a,attributesToInclude:i,editable:c,tableDefinition:r}=n,l=o.get(_);let d;return typeof i=="function"?d=i(X):d=i,x`<bim-table ${z(async g=>{if(!g)return;const p=g,y=[],e=[];for(const t in a){const C=l.list.get(t);if(!(C&&C.group))continue;const b=C.group,w=e.find(I=>I.model===b);if(w)for(const I of a[t])w.expressIDs.add(I);else{const I={model:b,expressIDs:new Set(a[t])};e.push(I)}}for(const t of e){const{model:C,expressIDs:b}=t;for(const w of b){const I=await P(o,C,w,d,c);y.push(I)}}p.dataTransform=r,p.data=y,p.columns=[{name:"Entity",width:"minmax(15rem, 1fr)"}]})}></bim-table>`},ye=n=>L.create(be,n),Ce=Object.freeze(Object.defineProperty({__proto__:null,entityAttributes:ye},Symbol.toStringTag,{value:"Module"}));let A;const Ie=n=>{const{components:o,classifications:a}=n,i=o.get(K),c=o.get(U);A||(A=document.createElement("bim-table"),A.headersHidden=!0,A.hiddenColumns=["system"],A.columns=["Name",{name:"Actions",width:"auto"}],A.dataTransform={Actions:(l,d)=>{const{system:u,Name:g}=d;if(!(typeof u=="string"&&typeof g=="string"))return l;const p=i.list[u];if(!(p&&p[g]))return l;const y=p[g],{map:e}=y;return x`
          <div>
            <bim-checkbox checked @change=${C=>{const b=C.target;c.set(b.value,e)}}></bim-checkbox>
          </div>
        `}});const r=[];for(const l of a){const d=typeof l=="string"?l:l.system,u=typeof l=="string"?l:l.label,g=i.list[d];g&&r.push({data:{Name:u,system:d},children:Object.keys(g).map(p=>({data:{Name:p,system:d,Actions:""}}))})}return A.data=r,x`${A}`},xe=(n,o=!0)=>{const a=L.create(Ie,n);if(o){const{components:i}=n,c=i.get(_),[,r]=a;c.onFragmentsDisposed.add(()=>r())}return a},we=Object.freeze(Object.defineProperty({__proto__:null,classificationTree:xe},Symbol.toStringTag,{value:"Module"})),Se=n=>L.create(ee,n),$e=Object.freeze(Object.defineProperty({__proto__:null,elementProperties:Se},Symbol.toStringTag,{value:"Module"})),H=async(n,o,a,i)=>{var g;const c=[],r=n.get(j),l=await o.getProperties(a);if(!l)return c;const{type:d}=l,u={data:{Entity:F[d],Name:(g=l.Name)==null?void 0:g.value,modelID:o.uuid,expressID:a}};for(const p of i){const y=r.getEntityRelations(o,a,p);if(!y)continue;u.children||(u.children=[]),u.data.relations=JSON.stringify(y);const e={};for(const t of y){const C=await H(n,o,t,i);for(const b of C)if(b.data.relations)u.children.push(b);else{const w=o.data.get(t);if(!w){u.children.push(b);continue}const I=w[1][1],s=F[I];s in e||(e[s]=[]),b.data.Entity=b.data.Name,delete b.data.Name,e[s].push(b)}}for(const t in e){const C=e[t],b=C.map(I=>I.data.expressID),w={data:{Entity:t,modelID:o.uuid,relations:JSON.stringify(b)},children:C};u.children.push(w)}}return c.push(u),c},Ne=async(n,o,a,i)=>{const c=n.get(j),r=[];for(const l of o){let d;if(i)d={data:{Entity:l.name!==""?l.name:l.uuid},children:await H(n,l,i,a)};else{const u=c.relationMaps[l.uuid],g=await l.getAllPropertiesOfType(ne);if(!(u&&g))continue;const{expressID:p}=Object.values(g)[0];d={data:{Entity:l.name!==""?l.name:l.uuid},children:await H(n,l,p,a)}}r.push(d)}return r};let E;const De=(n,o)=>{const a=n.get(_),{modelID:i,expressID:c,relations:r}=o.data;if(!i)return null;const l=a.groups.get(i);return l?l.getFragmentMap([c,...JSON.parse(r??"[]")]):null},Oe=n=>{const{components:o,models:a,expressID:i}=n,c=n.selectHighlighterName??"select",r=n.hoverHighlighterName??"hover";E||(E=document.createElement("bim-table"),E.hiddenColumns=["modelID","expressID","relations"],E.columns=["Entity","Name"],E.headersHidden=!0,E.addEventListener("cellcreated",({detail:d})=>{const{cell:u}=d;u.column==="Entity"&&!("Name"in u.rowData)&&(u.style.gridColumn="1 / -1")})),E.addEventListener("rowcreated",d=>{d.stopImmediatePropagation();const{row:u}=d.detail,g=o.get(te),p=De(o,u);p&&Object.keys(p).length!==0&&(u.onmouseover=()=>{r&&(u.style.backgroundColor="var(--bim-ui_bg-contrast-20)",g.highlightByID(r,p,!0,!1,g.selection[c]??{}))},u.onmouseout=()=>{u.style.backgroundColor="",g.clear(r)},u.onclick=()=>{c&&g.highlightByID(c,p,!0,!0)})});const l=n.inverseAttributes??["IsDecomposedBy","ContainsElements"];return Ne(o,a,l,i).then(d=>E.data=d),x`${E}`},Ee=(n,o=!0)=>{const a=L.create(Oe,n);if(o){const[,i]=a,{components:c}=n,r=c.get(_),l=c.get(j),d=()=>i({models:r.groups.values()});l.onRelationsIndexed.add(d),r.onFragmentsDisposed.add(d)}return a},Te=Object.freeze(Object.defineProperty({__proto__:null,relationsTree:Ee},Symbol.toStringTag,{value:"Module"})),G=(n,o)=>[...n.get(se).list.values()].find(c=>c.world===o),Ae=(n,o)=>x`
    <bim-color-input @input=${i=>{const c=i.target;n.color=new V(c.color)}} color=${o}></bim-color-input>
  `,ke=(n,o)=>{const{postproduction:a}=n,i=a.n8ao.configuration;return x`
    <bim-color-input @input=${r=>{const l=r.target;i.color=new V(l.color)}} color=${o}></bim-color-input>
  `},Le=(n,o)=>{const{color:a,opacity:i}=JSON.parse(o),{postproduction:c}=n,{customEffects:r}=c;return x`
    <bim-color-input @input=${d=>{const{color:u,opacity:g}=d.target;r.lineColor=new V(u).getHex(),g&&(r.opacity=g/100)}} color=${a} opacity=${i*100}></bim-color-input>
  `},ve=(n,o)=>x`
    <bim-color-input @input=${i=>{const c=i.target,r=new V(c.color);n.material.uniforms.uColor.value=r}} color=${o}></bim-color-input>
  `,_e=(n,o)=>{const{postproduction:a}=n;return x`
    <bim-checkbox @change=${c=>{const r=c.target;a.setPasses({ao:r.checked})}} .checked=${o}></bim-checkbox>
  `},Re=(n,o)=>{const{postproduction:a}=n;return x`
    <bim-checkbox @change=${c=>{const r=c.target;a.setPasses({gamma:r.checked})}} .checked=${o}></bim-checkbox>
  `},Ge=(n,o)=>{const{postproduction:a}=n;return x`
    <bim-checkbox @change=${c=>{const r=c.target;a.setPasses({custom:r.checked})}} .checked=${o}></bim-checkbox>
  `},k=(n,o,a,i=()=>{})=>x`
    <bim-checkbox .checked="${a}" @change="${r=>{const d=r.target.checked;n[o]=d,i(d)}}"></bim-checkbox> 
  `,S=(n,o,a,i)=>{const c={slider:!1,min:0,max:100,step:1,prefix:null,suffix:null,onInputSet:()=>{},...i},{slider:r,min:l,max:d,step:u,suffix:g,prefix:p,onInputSet:y}=c;return x`
    <bim-number-input
      .pref=${p}
      .suffix=${g}
      .slider=${r} 
      min=${l} 
      value="${a}" 
      max=${d} 
      step=${u} 
      @change="${t=>{const b=t.target.value;n[o]=b,y(b)}}"
    ></bim-number-input> 
  `},Ve=n=>{const{components:o}=n,a=o.get(q);return x`<bim-table ${z(async c=>{var d,u,g,p,y;if(!c)return;const r=c;r.preserveStructureOnFilter=!0,r.dataTransform={Value:(e,t)=>{const C=t.World,b=a.list.get(C);if(!b)return e;const{scene:w,camera:I,renderer:s}=b,f=t.Name;if(f==="Grid"&&t.IsGridConfig&&typeof e=="boolean"){const m=G(o,b);return m?k(m,"visible",e):e}if(f==="Color"&&t.IsGridConfig&&typeof e=="string"){const m=G(o,b);return m?ve(m,e):e}if(f==="Distance"&&t.IsGridConfig&&typeof e=="number"){const m=G(o,b);return m?S(m.material.uniforms.uDistance,"value",e,{slider:!0,min:300,max:1e3}):e}if(f==="Size"&&t.IsGridConfig&&typeof e=="string"){const m=G(o,b);if(!m)return e;const{x:h,y:$}=JSON.parse(e),O=S(m.material.uniforms.uSize1,"value",h,{slider:!0,suffix:"m",prefix:"A",min:1,max:20}),D=S(m.material.uniforms.uSize2,"value",$,{slider:!0,suffix:"m",prefix:"B",min:1,max:20});return x`
            <div style="display: flex; gap: 0.25rem; width: 100%; flex-wrap: wrap">${O}${D}</div>
          `}if(f==="Near Frustum"&&I.three instanceof M&&typeof e=="number"){const m=I.three;return S(I.three,"near",e,{slider:!0,min:.1,max:10,step:.1,onInputSet:()=>m.updateProjectionMatrix()})}if(f==="Far Frustum"&&I.three instanceof M&&typeof e=="number"){const m=I.three;return S(I.three,"far",e,{slider:!0,min:300,max:2e3,step:10,onInputSet:()=>m.updateProjectionMatrix()})}if(f==="Field of View"&&I.three instanceof M&&typeof e=="number"){const m=I.three;return S(I.three,"fov",e,{slider:!0,min:10,max:120,onInputSet:()=>m.updateProjectionMatrix()})}if(f==="Invert Drag"&&I.hasCameraControls()&&typeof e=="boolean")return k(I.controls,"dollyDragInverted",e);if(f==="Dolly Speed"&&I.hasCameraControls()&&typeof e=="number")return S(I.controls,"dollySpeed",e,{slider:!0,min:.5,max:3,step:.1});if(f==="Truck Speed"&&I.hasCameraControls()&&typeof e=="number")return S(I.controls,"truckSpeed",e,{slider:!0,min:.5,max:6,step:.1});if(f==="Smooth Time"&&I.hasCameraControls()&&typeof e=="number")return S(I.controls,"smoothTime",e,{slider:!0,min:.01,max:2,step:.01});if(f==="Intensity"&&typeof e=="number"){if(t.Light&&typeof t.Light=="string"){const m=w.three.children.find(h=>h.uuid===t.Light);return m&&m instanceof R?S(m,"intensity",e,{slider:!0,min:0,max:10,step:.1}):e}if(t.IsAOConfig&&s instanceof N)return S(s.postproduction.n8ao.configuration,"intensity",e,{slider:!0,max:16,step:.1})}if(f==="Color"&&typeof e=="string"){const m=t.Light,h=w.three.children.find($=>$.uuid===m);if(h&&h instanceof R)return Ae(h,e);if(t.IsAOConfig&&s instanceof N)return ke(s,e)}if(f==="Ambient Oclussion"&&typeof e=="boolean"&&t.IsAOConfig&&s instanceof N)return _e(s,e);if(f==="Half Resolution"&&t.IsAOConfig&&s instanceof N&&typeof e=="boolean")return k(s.postproduction.n8ao.configuration,"halfRes",e);if(f==="Screen Space Radius"&&t.IsAOConfig&&s instanceof N&&typeof e=="boolean")return k(s.postproduction.n8ao.configuration,"screenSpaceRadius",e);if(f==="Radius"&&t.IsAOConfig&&s instanceof N&&typeof e=="number")return S(s.postproduction.n8ao.configuration,"aoRadius",e,{slider:!0,max:2,step:.1});if(f==="Denoise Samples"&&t.IsAOConfig&&s instanceof N&&typeof e=="number")return S(s.postproduction.n8ao.configuration,"denoiseSamples",e,{slider:!0,min:1,max:16});if(f==="Samples"&&t.IsAOConfig&&s instanceof N&&typeof e=="number")return S(s.postproduction.n8ao.configuration,"aoSamples",e,{slider:!0,min:1,max:16});if(f==="Denoise Radius"&&t.IsAOConfig&&s instanceof N&&typeof e=="number")return S(s.postproduction.n8ao.configuration,"denoiseRadius",e,{slider:!0,min:0,max:16,step:.1});if(f==="Distance Falloff"&&t.IsAOConfig&&s instanceof N&&typeof e=="number")return S(s.postproduction.n8ao.configuration,"distanceFalloff",e,{slider:!0,min:0,max:4,step:.1});if(f==="Directional Light"&&t.Light&&typeof t.Light=="string"&&typeof e=="boolean"){const m=w.three.children.find(h=>h.uuid===t.Light);return m&&m instanceof R?k(m,"visible",e):e}if(f==="Ambient Light"&&t.Light&&typeof t.Light=="string"&&typeof e=="boolean"){const m=w.three.children.find(h=>h.uuid===t.Light);return m&&m instanceof R?k(m,"visible",e):e}if(f==="Position"&&t.Light&&typeof t.Light=="string"&&typeof e=="string"){const m=w.three.children.find(B=>B.uuid===t.Light);if(!(m&&m instanceof R))return e;const{x:h,y:$,z:O}=JSON.parse(e),D=S(m.position,"x",h,{slider:!0,prefix:"X",suffix:"m",min:-50,max:50}),v=S(m.position,"y",$,{slider:!0,prefix:"Y",suffix:"m",min:-50,max:50}),T=S(m.position,"z",O,{slider:!0,prefix:"Z",suffix:"m",min:-50,max:50});return x`
            <div style="display: flex; gap: 0.25rem; width: 100%; flex-wrap: wrap">${D}${v}${T}</div>
          `}return f==="Custom Effects"&&t.IsCEConfig&&s instanceof N&&typeof e=="boolean"?Ge(s,e):f==="Color"&&t.IsOutlineConfig&&s instanceof N&&typeof e=="string"?Le(s,e):f==="Tolerance"&&t.IsOutlineConfig&&s instanceof N&&typeof e=="number"?S(s.postproduction.customEffects,"tolerance",e,{slider:!0,min:0,max:6,step:.01}):f==="Outline"&&t.IsOutlineConfig&&s instanceof N&&typeof e=="boolean"?k(s.postproduction.customEffects,"outlineEnabled",e):f==="Gloss"&&t.IsGlossConfig&&s instanceof N&&typeof e=="boolean"?k(s.postproduction.customEffects,"glossEnabled",e):f==="Min"&&t.IsGlossConfig&&s instanceof N&&typeof e=="number"?S(s.postproduction.customEffects,"minGloss",e,{slider:!0,min:-.5,max:.5,step:.01}):f==="Max"&&t.IsGlossConfig&&s instanceof N&&typeof e=="number"?S(s.postproduction.customEffects,"maxGloss",e,{slider:!0,min:-.5,max:.5,step:.01}):f==="Exponent"&&t.IsGlossConfig&&s instanceof N&&typeof e=="number"?S(s.postproduction.customEffects,"glossExponent",e,{slider:!0,min:0,max:5,step:.01}):f==="Gamma Correction"&&t.IsGammaConfig&&s instanceof N&&typeof e=="boolean"?Re(s,e):e}},r.addEventListener("cellcreated",({detail:e})=>{const t=e.cell.parentNode;if(!t)return;const C=t.querySelector("bim-table-cell[column='Name']"),b=t.querySelector("bim-table-cell[column='Value']");C&&!b&&(C.style.gridColumn="1 / -1")});const l=[];for(const[,e]of a.list){const{scene:t,camera:C,renderer:b}=e,w=G(o,e),I={data:{Name:e instanceof oe&&e.name||e.uuid},children:[]};if(t){const s={data:{Name:"Scene"}};if(w){const h={data:{Name:"Grid",Value:w.three.visible,World:e.uuid,IsGridConfig:!0},children:[{data:{Name:"Color",get Value(){return`#${w.material.uniforms.uColor.value.getHexString()}`},World:e.uuid,IsGridConfig:!0}},{data:{Name:"Size",get Value(){const $=w.material.uniforms.uSize1.value,O=w.material.uniforms.uSize2.value;return JSON.stringify({x:$,y:O})},World:e.uuid,IsGridConfig:!0}},{data:{Name:"Distance",Value:w.material.uniforms.uDistance.value,World:e.uuid,IsGridConfig:!0}}]};s.children||(s.children=[]),s.children.push(h)}const f=t.three.children.filter(h=>h instanceof ie);for(const h of f){const $={data:{Name:"Directional Light",Value:h.visible,World:e.uuid,Light:h.uuid},children:[{data:{Name:"Position",Value:JSON.stringify(h.position),World:e.uuid,Light:h.uuid}},{data:{Name:"Intensity",Value:h.intensity,World:e.uuid,Light:h.uuid}},{data:{Name:"Color",Value:`#${h.color.getHexString()}`,World:e.uuid,Light:h.uuid}}]};s.children||(s.children=[]),s.children.push($)}const m=t.three.children.filter(h=>h instanceof re);for(const h of m){const $={data:{Name:"Ambient Light",Value:h.visible,World:e.uuid,Light:h.uuid},children:[{data:{Name:"Intensity",Value:h.intensity,World:e.uuid,Light:h.uuid}},{data:{Name:"Color",Value:`#${h.color.getHexString()}`,World:e.uuid,Light:h.uuid}}]};s.children||(s.children=[]),s.children.push($)}s.children&&((d=s.children)==null?void 0:d.length)>0&&((u=I.children)==null||u.push(s))}if(C.three instanceof M){const s={data:{Name:"Perspective Camera"},children:[{data:{Name:"Near Frustum",Value:C.three.near,World:e.uuid}},{data:{Name:"Far Frustum",Value:C.three.far,World:e.uuid}},{data:{Name:"Field of View",Value:C.three.fov,World:e.uuid}}]};if(C.hasCameraControls()){const{controls:f}=C,m={dollyDragInverted:"Invert Drag",dollySpeed:"Dolly Speed",truckSpeed:"Truck Speed",smoothTime:"Smooth Time"};for(const h in m){const $=f[h];$!=null&&((g=s.children)==null||g.push({data:{Name:m[h],Value:$,World:e.uuid}}))}}(p=I.children)==null||p.push(s)}if(b instanceof N){const{postproduction:s}=b,f=s.n8ao.configuration,m={data:{Name:"Renderer"},children:[{data:{Name:"Gamma Correction",Value:s.settings.gamma??!1,World:e.uuid,IsGammaConfig:!0}},{data:{Name:"Ambient Oclussion",Value:s.settings.ao??!1,World:e.uuid,IsAOConfig:!0},children:[{data:{Name:"Samples",Value:f.aoSamples,World:e.uuid,IsAOConfig:!0}},{data:{Name:"Color",Value:`#${f.color.getHexString()}`,World:e.uuid,IsAOConfig:!0}},{data:{Name:"Half Resolution",Value:f.halfRes,World:e.uuid,IsAOConfig:!0}},{data:{Name:"Screen Space Radius",Value:f.screenSpaceRadius,World:e.uuid,IsAOConfig:!0}},{data:{Name:"Radius",Value:f.aoRadius,World:e.uuid,IsAOConfig:!0}},{data:{Name:"Intensity",Value:f.intensity,World:e.uuid,IsAOConfig:!0}},{data:{Name:"Distance Falloff",Value:f.distanceFalloff,World:e.uuid,IsAOConfig:!0}},{data:{Name:"Denoise Samples",Value:f.denoiseSamples,World:e.uuid,IsAOConfig:!0}},{data:{Name:"Denoise Radius",Value:f.denoiseRadius,World:e.uuid,IsAOConfig:!0}}]},{data:{Name:"Custom Effects",Value:s.settings.custom??!1,World:e.uuid,IsCEConfig:!0},children:[{data:{Name:"Gloss",Value:s.customEffects.glossEnabled,World:e.uuid,IsGlossConfig:!0},children:[{data:{Name:"Min",Value:s.customEffects.minGloss,World:e.uuid,IsGlossConfig:!0}},{data:{Name:"Max",Value:s.customEffects.maxGloss,World:e.uuid,IsGlossConfig:!0}},{data:{Name:"Exponent",Value:s.customEffects.glossExponent,World:e.uuid,IsGlossConfig:!0}}]},{data:{Name:"Outline",Value:s.customEffects.outlineEnabled,World:e.uuid,IsOutlineConfig:!0},children:[{data:{Name:"Color",get Value(){const h=new V(s.customEffects.lineColor),$=s.customEffects.opacity;return JSON.stringify({color:`#${h.getHexString()}`,opacity:$})},World:e.uuid,IsOutlineConfig:!0}},{data:{Name:"Tolerance",Value:s.customEffects.tolerance,World:e.uuid,IsOutlineConfig:!0}}]}]}]};(y=I.children)==null||y.push(m)}l.push(I)}r.columns=[{name:"Name",width:"11rem"}],r.hiddenColumns=["World","Light","IsAOConfig","IsCEConfig","IsGlossConfig","IsOutlineConfig","IsGammaConfig","IsGridConfig"],r.data=l})} headers-hidden expanded></bim-table>`},We=(n,o=!0)=>{const a=L.create(Ve,n);if(o){const[i]=a,c=()=>a[1](),{components:r}=n,l=r.get(q);l.onDisposed.add(i.remove);for(const[,d]of l.list)d.onDisposed.add(c);i.addEventListener("disconnected",()=>{l.onDisposed.remove(i.remove);for(const[,d]of l.list)d.onDisposed.remove(c)})}return a},Me=Object.freeze(Object.defineProperty({__proto__:null,worldsConfiguration:We},Symbol.toStringTag,{value:"Module"})),je={...he,...Ce,...we,...$e,...Te,...Me,...ae,...me,...ce};export{je as t};
