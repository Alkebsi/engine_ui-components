import{b as L,h as A,J as $,s as F,W as v,j,A as ne,I as J,l as B,q,r as oe,t as ie,v as Q,w as Y,y as K,z as re,S as se,H as ae,C as U,P as k,K as V,x as S,N as ce,Q as le,T as ue,g as G,u as de}from"./index-B_4Q7ifa.js";const fe=t=>{const{components:i,schemaTag:n,viewDefinitionTag:d}=t,s=i.get(L),r=document.createElement("bim-table");r.addEventListener("cellcreated",({detail:f})=>{const{cell:o}=f;o.style.padding="0.25rem 0"}),r.hiddenColumns=["modelID"],r.headersHidden=!0;const l=[];for(const[,f]of s.groups){if(!f)continue;const o={data:{Name:f.name||f.uuid,modelID:f.uuid}};l.push(o)}return r.dataTransform={Name:(f,o)=>{const{modelID:c}=o;if(typeof c!="string")return f;const g=s.groups.get(c);if(!g)return c;let m;const{schema:e}=g.ifcMetadata;(n===void 0||n===!0)&&e&&(m=A`
          <bim-label style="background-color: var(--bim-ui_main-base); padding: 0 0.25rem; color: var(--bim-ui_main-contrast); border-radius: 0.25rem;">${e}</bim-label>
          `);let a;return(d===void 0||d===!0)&&"viewDefinition"in g.ifcMetadata&&(a=A`
          <bim-label style="background-color: var(--bim-ui_main-base); padding: 0 0.25rem; color: var(--bim-ui_main-contrast); border-radius: 0.25rem;">${g.ifcMetadata.viewDefinition}</bim-label>
        `),A`
       <div style="display: flex; flex: 1; gap: var(--bim-ui_size-4xs); justify-content: space-between; overflow: auto;">
        <div style="display: flex; flex-wrap: wrap; align-items: center; gap: 0 var(--bim-ui_size-4xs); flex-grow: 1; overflow: auto;">
          <div style="min-height: 1.75rem; overflow: auto; display: flex;">
            <bim-label style="white-space: normal;">${f}</bim-label>
          </div>
          ${m}
          ${a}
        </div>
        <div style="display: flex; gap: var(--bim-ui_size-4xs); align-self: flex-start; flex-shrink: 0;">
          <bim-button @click=${C=>{g.visible=!g.visible;const b=C.target;b.icon=g.visible?"mdi:eye":"mdi:eye-off"}} icon="mdi:eye"></bim-button>
          <bim-button @click=${()=>s.disposeGroup(g)} icon="mdi:delete"></bim-button>
        </div>
       </div>
      `}},r.data=l,A`
    <div>
      ${l.length===0?A`<bim-label>No models has been loaded yet</bim-label>`:r}
    </div>
  `},me=(t,i=!0)=>{const n=$.create(fe,t);if(i){const{components:d}=t,s=d.get(L),[,r]=n;s.onFragmentsLoaded.add(()=>setTimeout(()=>r())),s.onFragmentsDisposed.add(()=>r())}return n},pe=Object.freeze(Object.defineProperty({__proto__:null,modelsList:me},Symbol.toStringTag,{value:"Module"})),X=["Name","ContainedInStructure","ForLayerSet","LayerThickness","HasProperties","HasAssociations","HasAssignments","HasPropertySets","PredefinedType","Quantities","ReferencedSource","Identification",t=>t.includes("Value"),t=>t.startsWith("Material"),t=>t.startsWith("Relating"),t=>{const i=["IsGroupedBy","IsDecomposedBy"];return t.startsWith("Is")&&!i.includes(t)}];async function M(t,i,n,d=X,s=!1){const r=t.get(v),l=await i.getProperties(n);if(!l)return{data:{Entity:`${n} properties not found...`}};const f=r.relationMaps[i.uuid],o={data:{}};for(const c in l){const g=d.map(e=>typeof e=="string"?c===e:e(c)).includes(!0);if(!(c==="type"||g))continue;const m=l[c];if(m)if(m.type===5){o.children||(o.children=[]);const e=await M(t,i,m.value,d,s);o.children.push(e)}else if(typeof m=="object"&&!Array.isArray(m)){const{value:e,type:a}=m;if(s)a===1||a===2||a===3||(o.data[c]=e);else{const I=typeof e=="number"?Number(e.toFixed(3)):e;o.data[c]=I}}else if(Array.isArray(m))for(const e of m){if(e.type!==5)continue;o.children||(o.children=[]);const a=await M(t,i,e.value,d,s);o.children.push(a)}else if(c==="type"){const e=j[m];o.data.Entity=e}else o.data[c]=m}if(f&&f.get(l.expressID)){const c=f.get(l.expressID);for(const g of d){const m=[];if(typeof g=="string"){const e=r._inverseAttributes.indexOf(g);e!==-1&&m.push(e)}else{const e=r._inverseAttributes.filter(a=>g(a));for(const a of e){const I=r._inverseAttributes.indexOf(a);m.push(I)}}for(const e of m){const a=c.get(e);if(a)for(const I of a){const w=await M(t,i,I,d,s);o.children||(o.children=[]),o.children.push(w)}}}}return o}const ge=t=>{const{components:i,fragmentIdMap:n,attributesToInclude:d,editable:s,tableDefinition:r}=t,l=i.get(L);let f;return typeof d=="function"?f=d(X):f=d,A`<bim-table ${F(async c=>{if(!c)return;const g=c,m=[],e=[];for(const a in n){const I=l.list.get(a);if(!(I&&I.group))continue;const w=I.group,C=e.find(b=>b.model===w);if(C)for(const b of n[a])C.expressIDs.add(b);else{const b={model:w,expressIDs:new Set(n[a])};e.push(b)}}for(const a of e){const{model:I,expressIDs:w}=a;for(const C of w){const b=await M(i,I,C,f,s);m.push(b)}}g.dataTransform=r,g.data=m,g.columns=[{name:"Entity",width:"minmax(15rem, 1fr)"}]})}></bim-table>`},he=t=>$.create(ge,t),ye=Object.freeze(Object.defineProperty({__proto__:null,entityAttributes:he},Symbol.toStringTag,{value:"Module"}));function be(t){const i=Object.keys(t).pop();return i&&t[i].length>0?t[i][0]:""}function Z(t){return t.map(i=>{const n={data:{System:be(i.filter)}};return i.children&&i.children.length>0&&(n.children=Z(i.children)),n})}const Ie=t=>{const{components:i,classifications:n}=t,d=i.get(ne),s=r=>{if(!r)return;const l=r;l.dataTransform={Actions:c=>c};const f=(c,g={})=>{const m=d.list,e=c[0],a=m[e],I=[];if(!e||!a)return I;for(const w in a){const C={...g,[e]:[w]},b=d.find(C);if(Object.keys(b).length>0){const p={filter:C};p.children=f(c.slice(1),C),I.push(p)}}return I},o=[];for(const c in n){const g=n[c],m=f(g),e=Z(m);o.push({data:{System:c},children:e})}l.data=o};return A`
  <div>
    ${Object.keys(n).length===0?A`<bim-label label="No classifications to show"></bim-label>`:A`<bim-table ${F(s)} headers-hidden expanded></bim-table>`}
  </div>
  `},Ce=(t,i=!0)=>{const n=$.create(Ie,t);if(i){const{components:d}=t,s=d.get(L),[,r]=n;s.onFragmentsDisposed.add(()=>r())}return n},we=Object.freeze(Object.defineProperty({__proto__:null,classificationTree:Ce},Symbol.toStringTag,{value:"Module"})),xe=["OwnerHistory","ObjectPlacement","CompositionType"],H=async(t,i,n)=>{const s={...{groupName:"Attributes",includeClass:!1},...n},{groupName:r,includeClass:l}=s,f=await t.getProperties(i)??{},o={data:{Name:r}};l&&(o.children||(o.children=[]),o.children.push({data:{Name:"Class",Value:j[f.type]}}));for(const c in f){if(xe.includes(c))continue;const g=f[c];if(g&&typeof g=="object"&&!Array.isArray(g)){if(g.type===re)continue;const m={data:{Name:c,Value:g.value}};o.children||(o.children=[]),o.children.push(m)}}return o},Ne=async(t,i)=>{const n={data:{Name:"Property Sets"}};for(const d of i){const s=await t.getProperties(d);if(!s)continue;const r={data:{Name:s.Name.value}};if(s.type===J){for(const l of s.HasProperties){const{value:f}=l,o=await t.getProperties(f);if(!o)continue;const c=Object.keys(o).find(m=>m.includes("Value"));if(!(c&&o[c]))continue;const g={data:{Name:o.Name.value,Value:o[c].value}};r.children||(r.children=[]),r.children.push(g)}r.children&&(n.children||(n.children=[]),n.children.push(r))}}return n},Ae=async(t,i)=>{const n={data:{Name:"Quantity Sets"}};for(const d of i){const s=await t.getProperties(d);if(!s)continue;const r={data:{Name:s.Name.value}};if(s.type===B){for(const l of s.Quantities){const{value:f}=l,o=await t.getProperties(f);if(!o)continue;const c=Object.keys(o).find(m=>m.includes("Value"));if(!(c&&o[c]))continue;const g={data:{Name:o.Name.value,Value:o[c].value}};r.children||(r.children=[]),r.children.push(g)}r.children&&(n.children||(n.children=[]),n.children.push(r))}}return n},Se=async(t,i)=>{const n={data:{Name:"Materials"}};for(const d of i){const s=await t.getProperties(d);if(s&&s.type===q){const r=s.ForLayerSet.value,l=await t.getProperties(r);if(!l)continue;for(const f of l.MaterialLayers){const{value:o}=f,c=await t.getProperties(o);if(!c)continue;const g=await t.getProperties(c.Material.value);if(!g)continue;const m={data:{Name:"Layer"},children:[{data:{Name:"Thickness",Value:c.LayerThickness.value}},{data:{Name:"Material",Value:g.Name.value}}]};n.children||(n.children=[]),n.children.push(m)}}if(s&&s.type===Y)for(const r of s.Materials){const{value:l}=r,f=await t.getProperties(l);if(!f)continue;const o={data:{Name:"Name",Value:f.Name.value}};n.children||(n.children=[]),n.children.push(o)}if(s&&s.type===Q){const r=await t.getProperties(d);if(!r)continue;const l={data:{Name:"Name",Value:r.Name.value}};n.children||(n.children=[]),n.children.push(l)}}return n},Re=async(t,i)=>{var d,s;const n={data:{Name:"Classifications"}};for(const r of i){const l=await t.getProperties(r);if(l&&l.type===K){const{value:f}=l.ReferencedSource,o=await t.getProperties(f);if(!o)continue;const c={data:{Name:o.Name.value},children:[{data:{Name:"Identification",Value:((d=l.Identification)==null?void 0:d.value)||((s=l.ItemReference)==null?void 0:s.value)}},{data:{Name:"Name",Value:l.Name.value}}]};n.children||(n.children=[]),n.children.push(c)}}return n},De=async(t,i)=>{var l;const n=t.get(v),d=t.get(L),s=[],r=[];for(const f in i){const o=d.list.get(f);if(!(o&&o.group))continue;const c=o.group,g=r.find(m=>m.model===c);if(g)for(const m of i[f])g.expressIDs.add(m);else{const m={model:c,expressIDs:new Set(i[f])};r.push(m)}}for(const f in r){const{model:o,expressIDs:c}=r[f],g=n.relationMaps[o.uuid];if(g)for(const m of c){const e=await o.getProperties(m);if(!e)continue;const a={data:{Name:(l=e.Name)==null?void 0:l.value}};s.push(a);const I=await H(o,m,{includeClass:!0});if(a.children||(a.children=[]),a.children.push(I),!g.get(m))continue;const C=n.getEntityRelations(o,m,"IsDefinedBy");if(C){const p=C.filter(async D=>{const R=await o.getProperties(D);return R?R.type===J:!1}),h=await Ne(o,p);h.children&&a.children.push(h);const y=C.filter(async D=>{const R=await o.getProperties(D);return R?R.type===B:!1}),x=await Ae(o,y);x.children&&a.children.push(x)}const b=n.getEntityRelations(o,m,"HasAssociations");if(b){const p=b.filter(async D=>{const R=await o.getProperties(D);return R?R.type===q||R.type===oe||R.type===ie||R.type===Q||R.type===Y:!1}),h=await Se(o,p);h.children&&a.children.push(h);const y=b.filter(async D=>{const R=await o.getProperties(D);return R?R.type===K:!1}),x=await Re(o,y);x.children&&a.children.push(x)}const u=n.getEntityRelations(o,m,"ContainedInStructure");if(u){const p=u[0],h=await H(o,p,{groupName:"SpatialContainer"});a.children.push(h)}}}return s};let T;const Ee=t=>{const{components:i,fragmentIdMap:n}=t;return T||(T=document.createElement("bim-table"),T.columns=[{name:"Name",width:"12rem"}],T.headersHidden=!0,T.addEventListener("cellcreated",({detail:d})=>{const{cell:s}=d;s.column==="Name"&&!("Value"in s.rowData)&&(s.style.gridColumn="1 / -1")})),De(i,n).then(d=>T.data=d),A`${T}`},Oe=t=>$.create(Ee,t),Te=Object.freeze(Object.defineProperty({__proto__:null,elementProperties:Oe},Symbol.toStringTag,{value:"Module"})),_=async(t,i,n,d)=>{var c;const s=[],r=t.get(v),l=await i.getProperties(n);if(!l)return s;const{type:f}=l,o={data:{Entity:j[f],Name:(c=l.Name)==null?void 0:c.value,modelID:i.uuid}};for(const g of d){const m=r.getEntityRelations(i,n,g);if(o.data.expressID=n,!!m){o.data.relations=JSON.stringify(m);for(const e of m){const a=await _(t,i,e,d);o.children||(o.children=[]),o.children.push(...a)}}}return s.push(o),s},Le=async(t,i,n,d)=>{const s=t.get(v),r=[];for(const l of i){let f;if(d)f={data:{Entity:l.name!==""?l.name:l.uuid},children:await _(t,l,d,n)};else{const o=s.relationMaps[l.uuid],c=await l.getAllPropertiesOfType(ae);if(!(o&&c))continue;const{expressID:g}=Object.values(c)[0];f={data:{Entity:l.name!==""?l.name:l.uuid},children:await _(t,l,g,n)}}r.push(f)}return r};let E;const z=(t,i)=>{const n=t.get(L),{modelID:d,expressID:s,relations:r}=i.data;if(!(d&&s))return null;const l=n.groups.get(d);return l?l.getFragmentMap([s,...JSON.parse(r??"[]")]):null},$e=t=>{const{components:i,models:n,inverseAttributes:d,selectHighlighterName:s,hoverHighlighterName:r,expressID:l}=t;return E||(E=document.createElement("bim-table"),E.hiddenColumns=["modelID","expressID","relations"],E.columns=["Entity","Name"],E.headersHidden=!0,E.addEventListener("cellcreated",({detail:o})=>{const{cell:c}=o;c.column==="Entity"&&!("Name"in c.rowData)&&(c.style.gridColumn="1 / -1")})),E.addEventListener("rowcreated",o=>{o.stopImmediatePropagation();const{row:c}=o.detail,g=i.get(se);c.onmouseover=()=>{if(!r)return;const m=z(i,c);m&&Object.keys(m).length!==0&&(c.style.backgroundColor="var(--bim-ui_bg-contrast-20)",g.highlightByID(r,m,!0,!1))},c.onmouseout=()=>{c.style.backgroundColor="",g.clear(r)},c.onclick=()=>{if(!s)return;const m=z(i,c);m&&Object.keys(m).length!==0&&g.highlightByID(s,m,!0,!0)}}),Le(i,n,d??["IsDecomposedBy","ContainsElements"],l).then(o=>E.data=o),A`${E}`},Ve=(t,i=!0)=>{const n=$.create($e,t);if(i){const[,d]=n,{components:s}=t,r=s.get(L),l=s.get(v),f=()=>d({models:r.groups.values()});l.onRelationsIndexed.add(f),r.onFragmentsDisposed.add(f)}return n},Pe=Object.freeze(Object.defineProperty({__proto__:null,relationsTree:Ve},Symbol.toStringTag,{value:"Module"})),P=(t,i)=>[...t.get(de).list.values()].find(s=>s.world===i),ve=(t,i)=>A`
    <bim-color-input @input=${d=>{const s=d.target;t.color=new G(s.color)}} color=${i}></bim-color-input>
  `,Ge=(t,i)=>{const{postproduction:n}=t,d=n.n8ao.configuration;return A`
    <bim-color-input @input=${r=>{const l=r.target;d.color=new G(l.color)}} color=${i}></bim-color-input>
  `},ke=(t,i)=>{const{color:n,opacity:d}=JSON.parse(i),{postproduction:s}=t,{customEffects:r}=s;return A`
    <bim-color-input @input=${f=>{const{color:o,opacity:c}=f.target;r.lineColor=new G(o).getHex(),c&&(r.opacity=c/100)}} color=${n} opacity=${d*100}></bim-color-input>
  `},Me=(t,i)=>A`
    <bim-color-input @input=${d=>{const s=d.target,r=new G(s.color);t.material.uniforms.uColor.value=r}} color=${i}></bim-color-input>
  `,We=(t,i)=>{const{postproduction:n}=t;return A`
    <bim-checkbox @change=${s=>{const r=s.target;n.setPasses({ao:r.checked})}} .checked=${i}></bim-checkbox>
  `},_e=(t,i)=>{const{postproduction:n}=t;return A`
    <bim-checkbox @change=${s=>{const r=s.target;n.setPasses({gamma:r.checked})}} .checked=${i}></bim-checkbox>
  `},Fe=(t,i)=>{const{postproduction:n}=t;return A`
    <bim-checkbox @change=${s=>{const r=s.target;n.setPasses({custom:r.checked})}} .checked=${i}></bim-checkbox>
  `},O=(t,i,n,d=()=>{})=>A`
    <bim-checkbox .checked="${n}" @change="${r=>{const f=r.target.checked;t[i]=f,d(f)}}"></bim-checkbox> 
  `,N=(t,i,n,d)=>{const s={slider:!1,min:0,max:100,step:1,prefix:null,suffix:null,onInputSet:()=>{},...d},{slider:r,min:l,max:f,step:o,suffix:c,prefix:g,onInputSet:m}=s;return A`
    <bim-number-input
      .pref=${g}
      .suffix=${c}
      .slider=${r} 
      min=${l} 
      value="${n}" 
      max=${f} 
      step=${o} 
      @change="${a=>{const w=a.target.value;t[i]=w,m(w)}}"
    ></bim-number-input> 
  `},je=t=>{const{components:i}=t,n=i.get(U);return A`<bim-table ${F(async s=>{var f,o,c,g,m;if(!s)return;const r=s;r.preserveStructureOnFilter=!0,r.dataTransform={Value:(e,a)=>{const I=a.World,w=n.list.get(I);if(!w)return e;const{scene:C,camera:b,renderer:u}=w,p=a.Name;if(p==="Grid"&&a.IsGridConfig&&typeof e=="boolean"){const h=P(i,w);return h?O(h,"visible",e):e}if(p==="Color"&&a.IsGridConfig&&typeof e=="string"){const h=P(i,w);return h?Me(h,e):e}if(p==="Distance"&&a.IsGridConfig&&typeof e=="number"){const h=P(i,w);return h?N(h.material.uniforms.uDistance,"value",e,{slider:!0,min:300,max:1e3}):e}if(p==="Size"&&a.IsGridConfig&&typeof e=="string"){const h=P(i,w);if(!h)return e;const{x:y,y:x}=JSON.parse(e),D=N(h.material.uniforms.uSize1,"value",y,{slider:!0,suffix:"m",prefix:"A",min:1,max:20}),R=N(h.material.uniforms.uSize2,"value",x,{slider:!0,suffix:"m",prefix:"B",min:1,max:20});return A`
            <div style="display: flex; gap: 0.25rem; width: 100%; flex-wrap: wrap">${D}${R}</div>
          `}if(p==="Near Frustum"&&b.three instanceof k&&typeof e=="number"){const h=b.three;return N(b.three,"near",e,{slider:!0,min:.1,max:10,step:.1,onInputSet:()=>h.updateProjectionMatrix()})}if(p==="Far Frustum"&&b.three instanceof k&&typeof e=="number"){const h=b.three;return N(b.three,"far",e,{slider:!0,min:300,max:2e3,step:10,onInputSet:()=>h.updateProjectionMatrix()})}if(p==="Field of View"&&b.three instanceof k&&typeof e=="number"){const h=b.three;return N(b.three,"fov",e,{slider:!0,min:10,max:120,onInputSet:()=>h.updateProjectionMatrix()})}if(p==="Invert Drag"&&b.hasCameraControls()&&typeof e=="boolean")return O(b.controls,"dollyDragInverted",e);if(p==="Dolly Speed"&&b.hasCameraControls()&&typeof e=="number")return N(b.controls,"dollySpeed",e,{slider:!0,min:.5,max:3,step:.1});if(p==="Truck Speed"&&b.hasCameraControls()&&typeof e=="number")return N(b.controls,"truckSpeed",e,{slider:!0,min:.5,max:6,step:.1});if(p==="Smooth Time"&&b.hasCameraControls()&&typeof e=="number")return N(b.controls,"smoothTime",e,{slider:!0,min:.01,max:2,step:.01});if(p==="Intensity"&&typeof e=="number"){if(a.Light&&typeof a.Light=="string"){const h=C.three.children.find(y=>y.uuid===a.Light);return h&&h instanceof V?N(h,"intensity",e,{slider:!0,min:0,max:10,step:.1}):e}if(a.IsAOConfig&&u instanceof S)return N(u.postproduction.n8ao.configuration,"intensity",e,{slider:!0,max:16,step:.1})}if(p==="Color"&&typeof e=="string"){const h=a.Light,y=C.three.children.find(x=>x.uuid===h);if(y&&y instanceof V)return ve(y,e);if(a.IsAOConfig&&u instanceof S)return Ge(u,e)}if(p==="Ambient Oclussion"&&typeof e=="boolean"&&a.IsAOConfig&&u instanceof S)return We(u,e);if(p==="Half Resolution"&&a.IsAOConfig&&u instanceof S&&typeof e=="boolean")return O(u.postproduction.n8ao.configuration,"halfRes",e);if(p==="Screen Space Radius"&&a.IsAOConfig&&u instanceof S&&typeof e=="boolean")return O(u.postproduction.n8ao.configuration,"screenSpaceRadius",e);if(p==="Radius"&&a.IsAOConfig&&u instanceof S&&typeof e=="number")return N(u.postproduction.n8ao.configuration,"aoRadius",e,{slider:!0,max:2,step:.1});if(p==="Denoise Samples"&&a.IsAOConfig&&u instanceof S&&typeof e=="number")return N(u.postproduction.n8ao.configuration,"denoiseSamples",e,{slider:!0,min:1,max:16});if(p==="Samples"&&a.IsAOConfig&&u instanceof S&&typeof e=="number")return N(u.postproduction.n8ao.configuration,"aoSamples",e,{slider:!0,min:1,max:16});if(p==="Denoise Radius"&&a.IsAOConfig&&u instanceof S&&typeof e=="number")return N(u.postproduction.n8ao.configuration,"denoiseRadius",e,{slider:!0,min:0,max:16,step:.1});if(p==="Distance Falloff"&&a.IsAOConfig&&u instanceof S&&typeof e=="number")return N(u.postproduction.n8ao.configuration,"distanceFalloff",e,{slider:!0,min:0,max:4,step:.1});if(p==="Directional Light"&&a.Light&&typeof a.Light=="string"&&typeof e=="boolean"){const h=C.three.children.find(y=>y.uuid===a.Light);return h&&h instanceof V?O(h,"visible",e):e}if(p==="Ambient Light"&&a.Light&&typeof a.Light=="string"&&typeof e=="boolean"){const h=C.three.children.find(y=>y.uuid===a.Light);return h&&h instanceof V?O(h,"visible",e):e}if(p==="Position"&&a.Light&&typeof a.Light=="string"&&typeof e=="string"){const h=C.three.children.find(te=>te.uuid===a.Light);if(!(h&&h instanceof V))return e;const{x:y,y:x,z:D}=JSON.parse(e),R=N(h.position,"x",y,{slider:!0,prefix:"X",suffix:"m",min:-50,max:50}),W=N(h.position,"y",x,{slider:!0,prefix:"Y",suffix:"m",min:-50,max:50}),ee=N(h.position,"z",D,{slider:!0,prefix:"Z",suffix:"m",min:-50,max:50});return A`
            <div style="display: flex; gap: 0.25rem; width: 100%; flex-wrap: wrap">${R}${W}${ee}</div>
          `}return p==="Custom Effects"&&a.IsCEConfig&&u instanceof S&&typeof e=="boolean"?Fe(u,e):p==="Color"&&a.IsOutlineConfig&&u instanceof S&&typeof e=="string"?ke(u,e):p==="Tolerance"&&a.IsOutlineConfig&&u instanceof S&&typeof e=="number"?N(u.postproduction.customEffects,"tolerance",e,{slider:!0,min:0,max:6,step:.01}):p==="Outline"&&a.IsOutlineConfig&&u instanceof S&&typeof e=="boolean"?O(u.postproduction.customEffects,"outlineEnabled",e):p==="Gloss"&&a.IsGlossConfig&&u instanceof S&&typeof e=="boolean"?O(u.postproduction.customEffects,"glossEnabled",e):p==="Min"&&a.IsGlossConfig&&u instanceof S&&typeof e=="number"?N(u.postproduction.customEffects,"minGloss",e,{slider:!0,min:-.5,max:.5,step:.01}):p==="Max"&&a.IsGlossConfig&&u instanceof S&&typeof e=="number"?N(u.postproduction.customEffects,"maxGloss",e,{slider:!0,min:-.5,max:.5,step:.01}):p==="Exponent"&&a.IsGlossConfig&&u instanceof S&&typeof e=="number"?N(u.postproduction.customEffects,"glossExponent",e,{slider:!0,min:0,max:5,step:.01}):p==="Gamma Correction"&&a.IsGammaConfig&&u instanceof S&&typeof e=="boolean"?_e(u,e):e}},r.addEventListener("cellcreated",({detail:e})=>{const a=e.cell.parentNode;if(!a)return;const I=a.querySelector("bim-table-cell[column='Name']"),w=a.querySelector("bim-table-cell[column='Value']");I&&!w&&(I.style.gridColumn="1 / -1")});const l=[];for(const[,e]of n.list){const{scene:a,camera:I,renderer:w}=e,C=P(i,e),b={data:{Name:e instanceof ce&&e.name||e.uuid},children:[]};if(a){const u={data:{Name:"Scene"}};if(C){const y={data:{Name:"Grid",Value:C.three.visible,World:e.uuid,IsGridConfig:!0},children:[{data:{Name:"Color",get Value(){return`#${C.material.uniforms.uColor.value.getHexString()}`},World:e.uuid,IsGridConfig:!0}},{data:{Name:"Size",get Value(){const x=C.material.uniforms.uSize1.value,D=C.material.uniforms.uSize2.value;return JSON.stringify({x,y:D})},World:e.uuid,IsGridConfig:!0}},{data:{Name:"Distance",Value:C.material.uniforms.uDistance.value,World:e.uuid,IsGridConfig:!0}}]};u.children||(u.children=[]),u.children.push(y)}const p=a.three.children.filter(y=>y instanceof le);for(const y of p){const x={data:{Name:"Directional Light",Value:y.visible,World:e.uuid,Light:y.uuid},children:[{data:{Name:"Position",Value:JSON.stringify(y.position),World:e.uuid,Light:y.uuid}},{data:{Name:"Intensity",Value:y.intensity,World:e.uuid,Light:y.uuid}},{data:{Name:"Color",Value:`#${y.color.getHexString()}`,World:e.uuid,Light:y.uuid}}]};u.children||(u.children=[]),u.children.push(x)}const h=a.three.children.filter(y=>y instanceof ue);for(const y of h){const x={data:{Name:"Ambient Light",Value:y.visible,World:e.uuid,Light:y.uuid},children:[{data:{Name:"Intensity",Value:y.intensity,World:e.uuid,Light:y.uuid}},{data:{Name:"Color",Value:`#${y.color.getHexString()}`,World:e.uuid,Light:y.uuid}}]};u.children||(u.children=[]),u.children.push(x)}u.children&&((f=u.children)==null?void 0:f.length)>0&&((o=b.children)==null||o.push(u))}if(I.three instanceof k){const u={data:{Name:"Perspective Camera"},children:[{data:{Name:"Near Frustum",Value:I.three.near,World:e.uuid}},{data:{Name:"Far Frustum",Value:I.three.far,World:e.uuid}},{data:{Name:"Field of View",Value:I.three.fov,World:e.uuid}}]};if(I.hasCameraControls()){const{controls:p}=I,h={dollyDragInverted:"Invert Drag",dollySpeed:"Dolly Speed",truckSpeed:"Truck Speed",smoothTime:"Smooth Time"};for(const y in h){const x=p[y];x!=null&&((c=u.children)==null||c.push({data:{Name:h[y],Value:x,World:e.uuid}}))}}(g=b.children)==null||g.push(u)}if(w instanceof S){const{postproduction:u}=w,p=u.n8ao.configuration,h={data:{Name:"Renderer"},children:[{data:{Name:"Gamma Correction",Value:u.settings.gamma??!1,World:e.uuid,IsGammaConfig:!0}},{data:{Name:"Ambient Oclussion",Value:u.settings.ao??!1,World:e.uuid,IsAOConfig:!0},children:[{data:{Name:"Samples",Value:p.aoSamples,World:e.uuid,IsAOConfig:!0}},{data:{Name:"Color",Value:`#${p.color.getHexString()}`,World:e.uuid,IsAOConfig:!0}},{data:{Name:"Half Resolution",Value:p.halfRes,World:e.uuid,IsAOConfig:!0}},{data:{Name:"Screen Space Radius",Value:p.screenSpaceRadius,World:e.uuid,IsAOConfig:!0}},{data:{Name:"Radius",Value:p.aoRadius,World:e.uuid,IsAOConfig:!0}},{data:{Name:"Intensity",Value:p.intensity,World:e.uuid,IsAOConfig:!0}},{data:{Name:"Distance Falloff",Value:p.distanceFalloff,World:e.uuid,IsAOConfig:!0}},{data:{Name:"Denoise Samples",Value:p.denoiseSamples,World:e.uuid,IsAOConfig:!0}},{data:{Name:"Denoise Radius",Value:p.denoiseRadius,World:e.uuid,IsAOConfig:!0}}]},{data:{Name:"Custom Effects",Value:u.settings.custom??!1,World:e.uuid,IsCEConfig:!0},children:[{data:{Name:"Gloss",Value:u.customEffects.glossEnabled,World:e.uuid,IsGlossConfig:!0},children:[{data:{Name:"Min",Value:u.customEffects.minGloss,World:e.uuid,IsGlossConfig:!0}},{data:{Name:"Max",Value:u.customEffects.maxGloss,World:e.uuid,IsGlossConfig:!0}},{data:{Name:"Exponent",Value:u.customEffects.glossExponent,World:e.uuid,IsGlossConfig:!0}}]},{data:{Name:"Outline",Value:u.customEffects.outlineEnabled,World:e.uuid,IsOutlineConfig:!0},children:[{data:{Name:"Color",get Value(){const y=new G(u.customEffects.lineColor),x=u.customEffects.opacity;return JSON.stringify({color:`#${y.getHexString()}`,opacity:x})},World:e.uuid,IsOutlineConfig:!0}},{data:{Name:"Tolerance",Value:u.customEffects.tolerance,World:e.uuid,IsOutlineConfig:!0}}]}]}]};(m=b.children)==null||m.push(h)}l.push(b)}r.columns=[{name:"Name",width:"11rem"}],r.hiddenColumns=["World","Light","IsAOConfig","IsCEConfig","IsGlossConfig","IsOutlineConfig","IsGammaConfig","IsGridConfig"],r.data=l})} headers-hidden expanded></bim-table>`},He=(t,i=!0)=>{const n=$.create(je,t);if(i){const[d]=n,s=()=>n[1](),{components:r}=t,l=r.get(U);l.onDisposed.add(d.remove);for(const[,f]of l.list)f.onDisposed.add(s);d.addEventListener("disconnected",()=>{l.onDisposed.remove(d.remove);for(const[,f]of l.list)f.onDisposed.remove(s)})}return n},ze=Object.freeze(Object.defineProperty({__proto__:null,worldsConfiguration:He},Symbol.toStringTag,{value:"Module"})),Be={...pe,...ye,...we,...Te,...Pe,...ze};export{Be as t};
